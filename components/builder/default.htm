{% if not record %}
    {% partial '404' %}
{% endif %}

{% for block in record.builder %}
    {% set block_identifier = block.content_group ~ loop.index0 %}

    {% set block_unique_class = block.content_group ~ '_' ~ record.id ~ '_' ~ loop.index0 %}

    {% if block.backgroundColor == 'image' %}
        {% put addStyles %}
            {% if block.backgroundImage %}
                .Builder-container--{{ block_unique_class }} {
                    background-image: {{ block.backgroundImage | imageset(1920, 1080) }};
                }
            {% endif %}

            {% if block.backgroundImageMobile %}
                @media (max-width: 991px) {
                    .Builder-container--{{ block_unique_class }} {
                        background-image: {{ block.backgroundImageMobile | imageset(991, 1200) }};
                    }
                }
            {% endif %}
        {% endput %}
    {% elseif block.backgroundColor == 'containerImage' %}
        {% put addStyles %}
            {% if block.backgroundImage %}
                .Builder-container--{{ block_unique_class }} > .Section > .Flex > .Flex-container {
                    background-image: {{ block.backgroundImage | imageset(1920, 1080) }};
                }
            {% endif %}

            {% if block.backgroundImageMobile %}
                @media (max-width: 991px) {
                    .Builder-container--{{ block_unique_class }} > .Section > .Flex > .Flex-container {
                        background-image: {{ block.backgroundImageMobile | imageset(991, 1200) }};
                    }
                }
            {% endif %}
        {% endput %}
    {% endif %}

    <div
        id="{{ str_slug(block.blockId) }}"
        class="
            Builder-container--{{ block.containerWidth ? block.containerWidth : 'defaultWidth' }}
            Builder-container--{{ block.backgroundColor ? block.backgroundColor : 'defaultBg' }}
            Builder-container--{{ block.elevated ? 'elevated' : 'notElevated' }}

            Builder-container--{{ block_unique_class }}

            {% for item in block.customCssClass %}Builder-container--{{ item }} {% endfor %}


{% if block.responsiveHide %}
    {% for item in block.responsiveHide %}
        Builder-container--hide{{ item|capitalize }}
    {% endfor %}
{% endif %}
        "
    >
        {% if block.aliasOverride %}
            {% component block.aliasOverride data=block block_identifier=block_identifier block_unique_class=block_unique_class %}
        {% else %}
            {% component block_identifier data=block block_identifier=block_identifier block_unique_class=block_unique_class %}
        {% endif %}
    </div>
{% endfor %}
